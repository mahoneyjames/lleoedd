doctype html
html(lang="en")
  head
    title= `${title ? title: label('titles.' + titleLabel)} | ${h.siteName}`
    link(rel='stylesheet', href='/dist/style.css')

    meta(charset="utf-8")
    link(rel="shortcut icon" type="image/png" href="/images/icons/doughnut.png")
    meta(name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no")
  body
    
    block header
      nav.navbar.navbar-expand-lg.navbar-dark.bg-dark
        a.navbar-brand(href=url("")) admin

        button.navbar-toggler(data-toggle="collapse" data-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation")
          span.navbar-toggler-icon
        div.collapse.navbar-collapse(id="navbarCollapse")
          ul.navbar-nav.mr-auto         
            each item in h.menu
              li.nav-item
                a.nav-link(href=url(item.slug), class=(currentPath.startsWith(item.slug) ? 'active' : ''))
                  -//!= h.icon(item.icon)
                  span #{label('nav.' + item.title)}
          

          ul.navbar-nav.mt-md-0
            //- li.nav-item.dropdown
            //-   a.nav-link.dropdown-toggle(data-toggle="dropdown" id="dropdownLanguage" aria-haspopup="true" aria-expanded="false") Iaith: Cymraeg
            //-   div.dropdown-menu.dropdown-menu-right(aria-labelledby="dropdownLanguage")
            //-     a.dropdown-item.active(href="/") English
            //-     a.dropdown-item(href="/") Welsh
            li.nav-item: a.nav-link(href=url('about'),class=(currentPath.startsWith('/about') ? 'active' : '')) #{label('nav.about')} 
            if user
              li.nav-item: a.nav-link(href=url("logout"), class=(currentPath.startsWith('/logout') ? 'active' : ''))
                -//!= h.icon('logout')
                span #{label('nav.logout')} 
              li.nav-item: a.nav-link(href=url("account"), class=(currentPath.startsWith('/account') ? 'active' : ''))
                span #{label('nav.account')} 
            else
              -//li.nav-item: a.nav-link(href="/register", class=(currentPath.startsWith('/register') ? 'active' : '')) #{label('nav.register')} 
              li.nav-item: a.nav-link(href=url("login"), class=(currentPath.startsWith('/login') ? 'active' : '')) #{label('nav.login')} 

      

    
    div.container
      block messages
        if locals.flashes      
          .inner
            .flash-messages
              - const categories = Object.keys(locals.flashes)
              each category in categories
                each message in flashes[category]
                  .alert.alert-dismissible.fade.show(class=`alert-${category}` role="alert")
                    button.close(data-dismiss="alert" aria-label="Close")
                      span(aria-hidden="true") &times;    
                    p!= message

      main(role="main")
        block content
          p This is the default content

    footer
      block footer
        div.centre
          p #{label('layout.language.current')}
          a(href=`${languageSwitchUrl}`) #{label('layout.language.change')}

    block scripts
      script(src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous")
      script(src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.3/umd/popper.min.js" integrity="sha384-vFJXuSJphROIrBnz7yo7oB41mKfc8JzQZiCq4NCceLEaO4IHwicKwpJf9c9IpFgh" crossorigin="anonymous")
      script(src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/js/bootstrap.min.js" integrity="sha384-alpBpkh1PFOepccYVYDB4do5UnbKysX5WZXm3XxPqe5iKTfUKjNkCk9SaVuEZflJ" crossorigin="anonymous")
      script(src=`https://maps.googleapis.com/maps/api/js?key=${process.env.MAP_KEY}&libraries=places`)
      script(src="/dist/App.bundle.js")


    block pageScripts
